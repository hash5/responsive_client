sj.prototype.Yi=p(16,function(a){a&&!this.Sb&&(tj(this),this.zb=null,this.ta.forEach(function(a,c){var d=c.toLowerCase();c!=d&&(this.remove(c),this.setValues(d,a))},this));this.Sb=a});var ds="P T G M K  m u n".split(" ");function es(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var fs=/#/g,gs=/[\#\?@]/g,hs=/[\#\?]/g,is=/[\#\?:]/g,js=/[#\/\?@]/g;function ks(a,b){return x(a)?encodeURI(a).replace(b,es):null}
function ls(a,b){var c;if(a instanceof ls)this.Sb=u(b)?b:a.Sb,ms(this,a.rf),c=a.lj,ns(this),this.lj=c,c=a.Uf,ns(this),this.Uf=c,os(this,a.Hi),this.setPath(a.getPath()),ps(this,a.zd.V()),c=a.Rh,ns(this),this.Rh=c;else if(a&&(c=$d(String(a)))){this.Sb=!!b;ms(this,c[1]||"",!0);var d=c[2]||"";ns(this);this.lj=d?decodeURIComponent(d):"";d=c[3]||"";ns(this);this.Uf=d?decodeURIComponent(d):"";os(this,c[4]);this.setPath(c[5]||"",!0);ps(this,c[6]||"",!0);c=c[7]||"";ns(this);this.Rh=c?decodeURIComponent(c):
""}else this.Sb=!!b,this.zd=new sj(null,0,this.Sb)}e=ls.prototype;e.rf="";e.lj="";e.Uf="";e.Hi=null;e.$o="";e.Rh="";e.Vs=!1;e.Sb=!1;
e.toString=function(){var a=[],b=this.rf;b&&a.push(ks(b,js),":");if(b=this.Uf){a.push("//");var c=this.lj;c&&a.push(ks(c,js),"@");a.push(encodeURIComponent(String(b)));b=this.Hi;null!=b&&a.push(":",String(b))}if(b=this.getPath())this.Uf&&"/"!=b.charAt(0)&&a.push("/"),a.push(ks(b,"/"==b.charAt(0)?hs:is));(b=this.zd.toString())&&a.push("?",b);(b=this.Rh)&&a.push("#",ks(b,fs));return a.join("")};e.V=function(){return new ls(this)};
function ms(a,b,c){ns(a);a.rf=c?b?decodeURIComponent(b):"":b;a.rf&&(a.rf=a.rf.replace(/:$/,""))}function os(a,b){ns(a);if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.Hi=b}else a.Hi=null}e.getPath=function(){return this.$o};e.setPath=function(a,b){ns(this);this.$o=b?a?decodeURIComponent(a):"":a;return this};function ps(a,b,c){ns(a);b instanceof sj?(a.zd=b,a.zd.Yi(a.Sb)):(c||(b=ks(b,gs)),a.zd=new sj(b,0,a.Sb))}
function ns(a){if(a.Vs)throw Error("Tried to modify a read-only Uri");}e.Yi=function(a){this.Sb=a;this.zd&&this.zd.Yi(a);return this};function qs(a){a.stopPropagation()}
function rs(){return'\x3cdiv\x3e\x3cdiv class\x3d"upload-form"\x3e\x3cspan class\x3d"small"\x3eUpload new file:\x3c/span\x3e\x3cbr /\x3e\x3cbr /\x3e\x3cbutton class\x3d"btn primary enabled upload-btn"\x3eSelect File\x3c/button\x3e\x3cspan class\x3d"small"\x3eor Drag\x26Drop\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"thumbs"\x3e\x3c/div\x3e\x3cdiv class\x3d"progress hidden"\x3e\x3cdiv class\x3d"progress-bar"\x3e\x3c/div\x3e\x3cdiv class\x3d"progress-bar-status"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'}
function ss(a){return"\x3cdiv\x3e"+mf(a.fileName)+" ("+mf(a.fileSize)+')\x3cbr /\x3e\x3ca href\x3d"'+mf(a.url)+'" target\x3d"_blank"\x3eDownload\x3c/a\x3e\x3c/div\x3e'};function ts(a){Ok.call(this);this.ck=a}C(ts,Ok);ts.prototype.d=function(){ts.c.d.call(this);var a=this.ck.hk(),b=a.filename,c;c="";u(!1)||(c="B");var d=a.length,a=d,f="",g=1;0>d&&(d=-d);for(var h=0;h<ds.length;h++){var k=ds[h],g=ef[k];if(d>=g||1>=g&&d>0.1*g){f=k;break}}f?c&&(f+=c):g=1;c=Math.pow(10,u(void 0)?void 0:2);c=Math.round(a/g*c)/c+""+f;b={fileName:b,fileSize:c,url:this.ck.getUrl()};b=hf(ss,b);this.S().appendChild(b)};ts.prototype.e=function(){ts.c.e.call(this);K(this.b(),"file-tile")};
ts.prototype.lh=function(){var a=this.ck.getUrl(),b=pk(this.th.fa).indexOf(a);this.dispatchEvent({type:"changed_tag",tagName:"",value:a,Cg:!0,ib:[b,b+a.length]})};var us=!1,vs="";function ws(a){a=a.match(/[\d]+/g);if(!a)return"";a.length=3;return a.join(".")}
if(navigator.plugins&&navigator.plugins.length){var xs=navigator.plugins["Shockwave Flash"];xs&&(us=!0,xs.description&&(vs=ws(xs.description)));navigator.plugins["Shockwave Flash 2.0"]&&(us=!0,vs="2.0.0.11")}else if(navigator.mimeTypes&&navigator.mimeTypes.length){var ys=navigator.mimeTypes["application/x-shockwave-flash"];(us=ys&&ys.enabledPlugin)&&(vs=ws(ys.enabledPlugin.description))}else try{var zs=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),us=!0,vs=ws(zs.GetVariable("$version"))}catch(As){try{zs=
new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),us=!0,vs="6.0.21"}catch(Bs){try{zs=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),us=!0,vs=ws(zs.GetVariable("$version"))}catch(Cs){}}}var Ds=vs;function Es(a,b){T.call(this,b);this.Sq=a;this.r=new S(this);this.Zd=new Ld}C(Es,T);e=Es.prototype;e.fq="window";e.yq="#000000";e.Gm="sameDomain";function Fs(a,b,c){a.km=x(b)?b:Math.round(b)+"px";a.Rb=x(c)?c:Math.round(c)+"px";a.b()&&Ie(Gs(a),a.km,a.Rb)}
e.e=function(){Es.c.e.call(this);var a=this.b(),b;b=G?'\x3cobject classid\x3d"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id\x3d"%s" name\x3d"%s" class\x3d"%s"\x3e\x3cparam name\x3d"movie" value\x3d"%s"/\x3e\x3cparam name\x3d"quality" value\x3d"high"/\x3e\x3cparam name\x3d"FlashVars" value\x3d"%s"/\x3e\x3cparam name\x3d"bgcolor" value\x3d"%s"/\x3e\x3cparam name\x3d"AllowScriptAccess" value\x3d"%s"/\x3e\x3cparam name\x3d"allowFullScreen" value\x3d"true"/\x3e\x3cparam name\x3d"SeamlessTabbing" value\x3d"false"/\x3e%s\x3c/object\x3e':'\x3cembed quality\x3d"high" id\x3d"%s" name\x3d"%s" class\x3d"%s" src\x3d"%s" FlashVars\x3d"%s" bgcolor\x3d"%s" AllowScriptAccess\x3d"%s" allowFullScreen\x3d"true" SeamlessTabbing\x3d"false" type\x3d"application/x-shockwave-flash" pluginspage\x3d"http://www.macromedia.com/go/getflashplayer" %s\x3e\x3c/embed\x3e';
for(var c=G?'\x3cparam name\x3d"wmode" value\x3d"%s"/\x3e':"wmode\x3d%s",c=ta(c,this.fq),d=this.Zd.Bb(),f=this.Zd.Ra(),g=[],h=0;h<d.length;h++)g.push(encodeURIComponent(String(d[h]))+"\x3d"+encodeURIComponent(String(f[h])));b=ta(b,this.qa(),this.qa(),"goog-ui-media-flash-object",Aa(this.Sq),Aa(g.join("\x26")),this.yq,this.Gm,c);a.innerHTML=b;this.km&&this.Rb&&Fs(this,this.km,this.Rb);this.r.a(this.b(),Ob(Sc),qs)};
e.d=function(){if(null!=this.lp&&!(0<=Ja(Ds,this.lp)))throw Error("Method not supported");var a=this.w().createElement("div");a.className="goog-ui-media-flash";this.h=a};function Gs(a){return a.b()?a.b().firstChild:null}e.i=function(){Es.c.i.call(this);this.Zd=null;this.r.p();this.r=null};e.cf=function(){return this.J&&this.b()?Gs(this).readyState&&4==Gs(this).readyState||Gs(this).PercentLoaded&&100==Gs(this).PercentLoaded()?!0:!1:!1};function Hs(){T.call(this)}C(Hs,T);function Is(a,b,c){this.name=a;this.size=b;this.kl=c};function Js(){T.call(this);this.Ug=null;this.Ul=this.qa()+".swf";this.lo=!1;Ks.set(this.Ul,this)}C(Js,Hs);var Ks=new Ld;e=Js.prototype;e.o=function(a){Js.c.o.call(this,a);a=new Es("asset/third-party/uploader.swf");a.lp="10.0.45";a.Gm="always";a.Zd.set("allowNetworking","all");a.fq="transparent";a.Zd.set("yId",this.Ul);a.Zd.set("YUIBridgeCallback","YUIBridgeCallback");a.Zd.set("YUISwfId",this.Ul);a.L(this.b());this.Ug=a};e.e=function(){Js.c.e.call(this);var a=this.b();Fs(this.Ug,a.offsetWidth,a.offsetHeight)};
e.Oh=function(a){for(var b=[],c=0;c<a.length;c++)b.push(new Is(a[c].fileReference.name,a[c].fileReference.size,a[c]));return b};e.send=function(a,b,c){try{var d=new ls(a);if(c)for(var f in c){a=d;var g=f,h=c[f];ns(a);a.zd.set(g,h)}for(c=0;c<b.length;c++)Gs(this.Ug).upload(b[c].kl.fileId,d.toString(),[],"file"+c)}catch(k){}};e.vp=function(a){this.lo=a;this.Kk&&Gs(this.Ug).setAllowMultipleFiles(a)};
ca("YUI.applyTo",function(a,b,c){a=Ks.get(a);c=c[1];switch(c.type){case "swfReady":Gs(a.Ug).setAllowMultipleFiles(a.lo);break;case "uploadprogress":var d=c.bytesLoaded;c=c.bytesTotal;a.dispatchEvent({type:"progress",nb:0<c?d/c:0});break;case "uploadcompletedata":try{d=Ad(c.data),a.dispatchEvent({type:"complete",data:d})}catch(f){}break;case "fileselect":a.dispatchEvent({type:"select",files:a.Oh(c.fileList)})}});function Ls(a,b){R.call(this);this.r=new S(this);var c=a;b&&(c=N(a));this.r.a(c,"dragenter",this.mt);c!=a&&this.r.a(c,"dragover",this.nt);this.r.a(a,"dragover",this.qt);this.r.a(a,"drop",this.rt)}C(Ls,R);e=Ls.prototype;e.Tf=!1;e.i=function(){Ls.c.i.call(this);this.r.p()};e.mt=function(a){var b=a.Y.dataTransfer;(this.Tf=!(!b||!(b.types&&(F(b.types,"Files")||F(b.types,"public.file-url"))||b.files&&0<b.files.length)))&&a.preventDefault()};
e.nt=function(a){this.Tf&&(a.preventDefault(),a.Y.dataTransfer.dropEffect="none")};e.qt=function(a){this.Tf&&(a.preventDefault(),a.stopPropagation(),a=a.Y.dataTransfer,a.effectAllowed="all",a.dropEffect="copy")};e.rt=function(a){this.Tf&&(a.preventDefault(),a.stopPropagation(),a=new Uc(a.Y),a.type="drop",this.dispatchEvent(a))};function Ms(){T.call(this);this.Nh=this.Mh=null}C(Ms,Hs);e=Ms.prototype;e.o=function(a){Ms.c.o.call(this,a);this.Nh=this.w().d("input",{type:"file"})};e.e=function(){Ms.c.e.call(this);var a=qb?"touchstart":"click";this.g().a(this.b(),a,this.Sa);this.g().a(this.Nh,"change",this.os)};e.Oh=function(a){for(var b=[],c=0;c<a.length;c++)b.push(new Is(a[c].name,a[c].size,a[c]));return b};e.Sa=function(){this.Nh.click()};e.Ar=function(a){this.dispatchEvent({type:Ns,files:this.Oh(a.Y.dataTransfer.files)})};
e.Mr=function(a){this.dispatchEvent({type:"complete",data:Ad(a.target.responseText)})};e.$r=function(a){a=a.Y;this.dispatchEvent({type:"progress",nb:0<a.total?a.loaded/a.total:0})};e.os=function(a){this.dispatchEvent({type:"select",files:this.Oh(a.target.files)})};e.send=function(a,b,c){for(var d=new FormData,f=0;f<b.length;f++)d.append("file"+f,b[f].kl);if(c)for(f in c)d.append(f,c[f]);b=new XMLHttpRequest;b.open("POST",a,!0);this.g().a(b,"load",this.Mr);this.g().a(b.upload,"progress",this.$r);b.send(d)};
function Os(a){var b=document.body;a.Mh&&a.Mh.p();a.Mh=new Ls(b,!0);a.g().a(a.Mh,"drop",a.Ar)}e.vp=function(a){this.Nh.multiple=a?"true":""};var Ns="drop";function Ps(){}Ps.prototype.f=function(){if(!u(Modernizr.filereader)||!u(Modernizr.draganddrop))throw Error("monin.ui.FileUploaderFactory: Modernizr.filereader / Modernizr.draganddrop properties are not defined.");return Modernizr.filereader&&Modernizr.draganddrop&&!G?new Ms:new Js};function Qs(){Ok.call(this);this.cd=(new Ps).f();this.g().a(this.cd,"select",this.Yp).a(this.cd,"drop",this.Yp).a(this.cd,"progress",function(a){Rs(this,a.nb)}).a(this.cd,"complete",this.Cs);this.cd instanceof Ms&&Os(this.cd);this.Nk=!1}C(Qs,Ok);Qs.prototype.d=function(){Qs.c.d.call(this);var a=hf(rs);this.S().appendChild(a)};Qs.prototype.e=function(){Qs.c.e.call(this);K(this.b(),"file-tile");this.cd.Z(this.j("upload-btn"));this.cd.vp(!1)};
function Rs(a,b){a.j("progress-bar").style.width=100*b+"%";var c=Math.round(100*b)+"%";a.j("progress-bar-status").innerHTML=c}Qs.prototype.Yp=function(a){this.Nk||(Fb(this.j("progress"),"hidden"),K(this.j("upload-form"),"hidden"),this.Nk=!0,Rs(this,0),this.cd.send(ph()+"/files",a.files),Ss(this,a.files))};
function Ss(a,b){for(var c=a.j("thumbs"),d=0,f;f=b[d];d++)if(f=f.kl,f.type.match("image.*")){var g=new FileReader;g.onload=function(a){return function(b){var d=document.createElement("span");d.innerHTML=['\x3cimg class\x3d"thumb" src\x3d"',b.target.result,'" title\x3d"',escape(a.name),'"/\x3e'].join("");c.appendChild(d)}}(f);g.readAsDataURL(f)}}Qs.prototype.Cs=function(a){a=a.data[0];Ts[a._id]=a;Rs(this,1);this.Nk=!1;this.dispatchEvent({type:"changed_tag",tagName:"",value:a.url})};function Us(a,b,c){this.Id=b;this.ga=a;this.Rs=c}e=Us.prototype;e.getUrl=function(){return this.Id};e.qa=function(){return this.ga};e.hk=function(){return this.Rs};e.bc=function(a,b){Mj("/files/"+this.qa(),"DELETE",void 0,a,b)};e.equals=function(a){return!!a&&a.Id===this.Id};function Vs(){this.id="fileParser"}Vs.prototype.parse=function(a){var b=[],c=a.wa.match(new RegExp("http(s)?://("+Ws.join("|")+")"+(ph()+"/files/")+"\\w+","ig"));if(c)var d=a.nd.Cl,b=Ra(c,function(a){var b=a.substr(a.lastIndexOf("/")+1),c=this.hk(b,d);return null!=c?new Us(b,a,c):null},this);return Qa(b,function(a){return null!=a})};Vs.prototype.hk=function(a,b){if(b&&u(b.attachedFiles))for(var c=0;c<b.attachedFiles.length;c++){var d=b.attachedFiles[c];if(d._id===a)return d}return Ts[a]||null};
var Ts={},Ws=["dev.hash5.com:8080",document.location.host];function Xs(a,b){Vn.call(this,a,b);this.hi="icon-attachment";this.Jb="Files";this.en=[]}C(Xs,Vn);Xs.prototype.sa=function(){this.g().a(this.fa,qk,this.gc);Ys(this)};Xs.prototype.kk=function(){return new Qs};Xs.prototype.gc=function(){Ys(this)};function Ys(a){var b=nm(a.fa.Kc(),Vs);if(!gb(a.en,b,function(a,b){return a.equals(b)})){a.en=b;a.tl();for(var c=0;c<b.length;c++){var d=new ts(b[c]);a.Fe(d)}}};function Zs(){O.call(this)}C(Zs,hj);Zs.prototype.ma=function(){wk(Xs)};Zs.prototype.Sn=function(a){a=a.target;for(var b=a.le,c=nm(a.Kc(),Vs),d=0;d<c.length;d++)var f=c[d].getUrl(),b=b.replace(f,'\x3ca href\x3d"'+f+'" target\x3d"_blank" class\x3d"file-link"\x3e\x3c/a\x3e');a.le=b};fj("files",Zs);
//@ sourceURL=/asset/common/js-min/LANG/files.js