dg.prototype.Zi=X(23,function(a){a&&!this.Sb&&(eg(this),this.zb=null,this.ta.forEach(function(a,c){var d=c.toLowerCase();c!=d&&(this.remove(c),this.setValues(d,a))},this));this.Sb=a});var is="P T G M K  m u n".split(" ");function js(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var ks=/#/g,ls=/[\#\?@]/g,ms=/[\#\?]/g,ns=/[\#\?:]/g,os=/[#\/\?@]/g;function ps(a,b){return v(a)?encodeURI(a).replace(b,js):null}
function qs(a,b){var c;if(a instanceof qs)this.Sb=s(b)?b:a.Sb,rs(this,a.tf),c=a.mj,ss(this),this.mj=c,c=a.Wf,ss(this),this.Wf=c,ts(this,a.Hi),this.setPath(a.getPath()),us(this,a.Bd.V()),c=a.Sh,ss(this),this.Sh=c;else if(a&&(c=sd(String(a)))){this.Sb=!!b;rs(this,c[1]||"",!0);var d=c[2]||"";ss(this);this.mj=d?decodeURIComponent(d):"";d=c[3]||"";ss(this);this.Wf=d?decodeURIComponent(d):"";ts(this,c[4]);this.setPath(c[5]||"",!0);us(this,c[6]||"",!0);c=c[7]||"";ss(this);this.Sh=c?decodeURIComponent(c):
""}else this.Sb=!!b,this.Bd=new dg(null,0,this.Sb)}e=qs.prototype;e.tf="";e.mj="";e.Wf="";e.Hi=null;e.cp="";e.Sh="";e.Ws=!1;e.Sb=!1;
e.toString=function(){var a=[],b=this.tf;b&&a.push(ps(b,os),":");if(b=this.Wf){a.push("//");var c=this.mj;c&&a.push(ps(c,os),"@");a.push(encodeURIComponent(String(b)));b=this.Hi;null!=b&&a.push(":",String(b))}if(b=this.getPath())this.Wf&&"/"!=b.charAt(0)&&a.push("/"),a.push(ps(b,"/"==b.charAt(0)?ms:ns));(b=this.Bd.toString())&&a.push("?",b);(b=this.Sh)&&a.push("#",ps(b,ks));return a.join("")};e.V=function(){return new qs(this)};
function rs(a,b,c){ss(a);a.tf=c?b?decodeURIComponent(b):"":b;a.tf&&(a.tf=a.tf.replace(/:$/,""))}function ts(a,b){ss(a);if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.Hi=b}else a.Hi=null}e.getPath=function(){return this.cp};e.setPath=function(a,b){ss(this);this.cp=b?a?decodeURIComponent(a):"":a;return this};function us(a,b,c){ss(a);b instanceof dg?(a.Bd=b,a.Bd.Zi(a.Sb)):(c||(b=ps(b,ls)),a.Bd=new dg(b,0,a.Sb))}
function ss(a){if(a.Ws)throw Error("Tried to modify a read-only Uri");}e.Zi=function(a){this.Sb=a;this.Bd&&this.Bd.Zi(a);return this};function vs(a){a.stopPropagation()}
function ws(){return'\x3cdiv\x3e\x3cdiv class\x3d"upload-form"\x3e\x3cspan class\x3d"small"\x3eUpload new file:\x3c/span\x3e\x3cbr /\x3e\x3cbr /\x3e\x3cbutton class\x3d"btn primary enabled upload-btn"\x3eSelect File\x3c/button\x3e\x3cspan class\x3d"small"\x3eor Drag\x26Drop\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"thumbs"\x3e\x3c/div\x3e\x3cdiv class\x3d"progress hidden"\x3e\x3cdiv class\x3d"progress-bar"\x3e\x3c/div\x3e\x3cdiv class\x3d"progress-bar-status"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'}
function xs(a){return"\x3cdiv\x3e"+Kj(a.fileName)+" ("+Kj(a.fileSize)+')\x3cbr /\x3e\x3ca href\x3d"'+Kj(a.url)+'" target\x3d"_blank"\x3eDownload\x3c/a\x3e\x3c/div\x3e'};function ys(a){Vk.call(this);this.dk=a}B(ys,Vk);ys.prototype.d=function(){ys.c.d.call(this);var a=this.dk.ik(),b=a.filename,c;c="";s(!1)||(c="B");var d=a.length,a=d,f="",g=1;0>d&&(d=-d);for(var h=0;h<is.length;h++){var k=is[h],g=be[k];if(d>=g||1>=g&&d>0.1*g){f=k;break}}f?c&&(f+=c):g=1;c=Math.pow(10,s(void 0)?void 0:2);c=Math.round(a/g*c)/c+""+f;b={fileName:b,fileSize:c,url:this.dk.getUrl()};b=ee(xs,b);this.S().appendChild(b)};ys.prototype.e=function(){ys.c.e.call(this);I(this.b(),"file-tile")};
ys.prototype.mh=function(){var a=this.dk.getUrl(),b=Sk(this.vh.fa).indexOf(a);this.dispatchEvent({type:"changed_tag",tagName:"",value:a,Fg:!0,ib:[b,b+a.length]})};var zs=!1,As="";function Bs(a){a=a.match(/[\d]+/g);if(!a)return"";a.length=3;return a.join(".")}
if(navigator.plugins&&navigator.plugins.length){var Cs=navigator.plugins["Shockwave Flash"];Cs&&(zs=!0,Cs.description&&(As=Bs(Cs.description)));navigator.plugins["Shockwave Flash 2.0"]&&(zs=!0,As="2.0.0.11")}else if(navigator.mimeTypes&&navigator.mimeTypes.length){var Ds=navigator.mimeTypes["application/x-shockwave-flash"];(zs=Ds&&Ds.enabledPlugin)&&(As=Bs(Ds.enabledPlugin.description))}else try{var Es=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),zs=!0,As=Bs(Es.GetVariable("$version"))}catch(Fs){try{Es=
new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),zs=!0,As="6.0.21"}catch(Gs){try{Es=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),zs=!0,As=Bs(Es.GetVariable("$version"))}catch(Hs){}}}var Is=As;function Js(a,b){Q.call(this,b);this.Tq=a;this.r=new P(this);this.be=new fd}B(Js,Q);e=Js.prototype;e.gq="window";e.zq="#000000";e.Jm="sameDomain";function Ks(a,b,c){a.nm=v(b)?b:Math.round(b)+"px";a.Rb=v(c)?c:Math.round(c)+"px";a.b()&&Mj(Ls(a),a.nm,a.Rb)}
e.e=function(){Js.c.e.call(this);var a=this.b(),b;b=E?'\x3cobject classid\x3d"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id\x3d"%s" name\x3d"%s" class\x3d"%s"\x3e\x3cparam name\x3d"movie" value\x3d"%s"/\x3e\x3cparam name\x3d"quality" value\x3d"high"/\x3e\x3cparam name\x3d"FlashVars" value\x3d"%s"/\x3e\x3cparam name\x3d"bgcolor" value\x3d"%s"/\x3e\x3cparam name\x3d"AllowScriptAccess" value\x3d"%s"/\x3e\x3cparam name\x3d"allowFullScreen" value\x3d"true"/\x3e\x3cparam name\x3d"SeamlessTabbing" value\x3d"false"/\x3e%s\x3c/object\x3e':'\x3cembed quality\x3d"high" id\x3d"%s" name\x3d"%s" class\x3d"%s" src\x3d"%s" FlashVars\x3d"%s" bgcolor\x3d"%s" AllowScriptAccess\x3d"%s" allowFullScreen\x3d"true" SeamlessTabbing\x3d"false" type\x3d"application/x-shockwave-flash" pluginspage\x3d"http://www.macromedia.com/go/getflashplayer" %s\x3e\x3c/embed\x3e';
for(var c=E?'\x3cparam name\x3d"wmode" value\x3d"%s"/\x3e':"wmode\x3d%s",c=hk(c,this.gq),d=this.be.Bb(),f=this.be.Sa(),g=[],h=0;h<d.length;h++)g.push(encodeURIComponent(String(d[h]))+"\x3d"+encodeURIComponent(String(f[h])));b=hk(b,this.qa(),this.qa(),"goog-ui-media-flash-object",ya(this.Tq),ya(g.join("\x26")),this.zq,this.Jm,c);a.innerHTML=b;this.nm&&this.Rb&&Ks(this,this.nm,this.Rb);this.r.a(this.b(),Eb(qc),vs)};
e.d=function(){if(null!=this.op&&!(0<=Ga(Is,this.op)))throw Error("Method not supported");var a=this.w().createElement("div");a.className="goog-ui-media-flash";this.h=a};function Ls(a){return a.b()?a.b().firstChild:null}e.i=function(){Js.c.i.call(this);this.be=null;this.r.p();this.r=null};e.ef=function(){return this.H&&this.b()?Ls(this).readyState&&4==Ls(this).readyState||Ls(this).PercentLoaded&&100==Ls(this).PercentLoaded()?!0:!1:!1};function Ms(){Q.call(this)}B(Ms,Q);function Ns(a,b,c){this.name=a;this.size=b;this.nl=c};function Os(){Q.call(this);this.Vg=null;this.Wl=this.qa()+".swf";this.no=!1;Ps.set(this.Wl,this)}B(Os,Ms);var Ps=new fd;e=Os.prototype;e.o=function(a){Os.c.o.call(this,a);a=new Js("asset/third-party/uploader.swf");a.op="10.0.45";a.Jm="always";a.be.set("allowNetworking","all");a.gq="transparent";a.be.set("yId",this.Wl);a.be.set("YUIBridgeCallback","YUIBridgeCallback");a.be.set("YUISwfId",this.Wl);a.L(this.b());this.Vg=a};e.e=function(){Os.c.e.call(this);var a=this.b();Ks(this.Vg,a.offsetWidth,a.offsetHeight)};
e.Ph=function(a){for(var b=[],c=0;c<a.length;c++)b.push(new Ns(a[c].fileReference.name,a[c].fileReference.size,a[c]));return b};e.send=function(a,b,c){try{var d=new qs(a);if(c)for(var f in c){a=d;var g=f,h=c[f];ss(a);a.Bd.set(g,h)}for(c=0;c<b.length;c++)Ls(this.Vg).upload(b[c].nl.fileId,d.toString(),[],"file"+c)}catch(k){}};e.yp=function(a){this.no=a;this.Nk&&Ls(this.Vg).setAllowMultipleFiles(a)};
ca("YUI.applyTo",function(a,b,c){a=Ps.get(a);c=c[1];switch(c.type){case "swfReady":Ls(a.Vg).setAllowMultipleFiles(a.no);break;case "uploadprogress":var d=c.bytesLoaded;c=c.bytesTotal;a.dispatchEvent({type:"progress",nb:0<c?d/c:0});break;case "uploadcompletedata":try{d=Xc(c.data),a.dispatchEvent({type:"complete",data:d})}catch(f){}break;case "fileselect":a.dispatchEvent({type:"select",files:a.Ph(c.fileList)})}});function Qs(a,b){O.call(this);this.r=new P(this);var c=a;b&&(c=K(a));this.r.a(c,"dragenter",this.nt);c!=a&&this.r.a(c,"dragover",this.ot);this.r.a(a,"dragover",this.rt);this.r.a(a,"drop",this.st)}B(Qs,O);e=Qs.prototype;e.Vf=!1;e.i=function(){Qs.c.i.call(this);this.r.p()};e.nt=function(a){var b=a.Y.dataTransfer;(this.Vf=!(!b||!(b.types&&(D(b.types,"Files")||D(b.types,"public.file-url"))||b.files&&0<b.files.length)))&&a.preventDefault()};
e.ot=function(a){this.Vf&&(a.preventDefault(),a.Y.dataTransfer.dropEffect="none")};e.rt=function(a){this.Vf&&(a.preventDefault(),a.stopPropagation(),a=a.Y.dataTransfer,a.effectAllowed="all",a.dropEffect="copy")};e.st=function(a){this.Vf&&(a.preventDefault(),a.stopPropagation(),a=new sc(a.Y),a.type="drop",this.dispatchEvent(a))};function Rs(){Q.call(this);this.Oh=this.Nh=null}B(Rs,Ms);e=Rs.prototype;e.o=function(a){Rs.c.o.call(this,a);this.Oh=this.w().d("input",{type:"file"})};e.e=function(){Rs.c.e.call(this);var a=jb?"touchstart":"click";this.g().a(this.b(),a,this.Ta);this.g().a(this.Oh,"change",this.os)};e.Ph=function(a){for(var b=[],c=0;c<a.length;c++)b.push(new Ns(a[c].name,a[c].size,a[c]));return b};e.Ta=function(){this.Oh.click()};e.Ar=function(a){this.dispatchEvent({type:Ss,files:this.Ph(a.Y.dataTransfer.files)})};
e.Mr=function(a){this.dispatchEvent({type:"complete",data:Xc(a.target.responseText)})};e.$r=function(a){a=a.Y;this.dispatchEvent({type:"progress",nb:0<a.total?a.loaded/a.total:0})};e.os=function(a){this.dispatchEvent({type:"select",files:this.Ph(a.target.files)})};e.send=function(a,b,c){for(var d=new FormData,f=0;f<b.length;f++)d.append("file"+f,b[f].nl);if(c)for(f in c)d.append(f,c[f]);b=new XMLHttpRequest;b.open("POST",a,!0);this.g().a(b,"load",this.Mr);this.g().a(b.upload,"progress",this.$r);b.send(d)};
function Ts(a){var b=document.body;a.Nh&&a.Nh.p();a.Nh=new Qs(b,!0);a.g().a(a.Nh,"drop",a.Ar)}e.yp=function(a){this.Oh.multiple=a?"true":""};var Ss="drop";function Us(){}Us.prototype.f=function(){if(!s(Modernizr.filereader)||!s(Modernizr.draganddrop))throw Error("monin.ui.FileUploaderFactory: Modernizr.filereader / Modernizr.draganddrop properties are not defined.");return Modernizr.filereader&&Modernizr.draganddrop&&!E?new Rs:new Os};function Vs(){Vk.call(this);this.bd=(new Us).f();this.g().a(this.bd,"select",this.$p).a(this.bd,"drop",this.$p).a(this.bd,"progress",function(a){Ws(this,a.nb)}).a(this.bd,"complete",this.Cs);this.bd instanceof Rs&&Ts(this.bd);this.Qk=!1}B(Vs,Vk);Vs.prototype.d=function(){Vs.c.d.call(this);var a=ee(ws);this.S().appendChild(a)};Vs.prototype.e=function(){Vs.c.e.call(this);I(this.b(),"file-tile");this.bd.Z(this.j("upload-btn"));this.bd.yp(!1)};
function Ws(a,b){a.j("progress-bar").style.width=100*b+"%";var c=Math.round(100*b)+"%";a.j("progress-bar-status").innerHTML=c}Vs.prototype.$p=function(a){this.Qk||(yb(this.j("progress"),"hidden"),I(this.j("upload-form"),"hidden"),this.Qk=!0,Ws(this,0),this.bd.send(ug()+"/files",a.files),Xs(this,a.files))};
function Xs(a,b){for(var c=a.j("thumbs"),d=0,f;f=b[d];d++)if(f=f.nl,f.type.match("image.*")){var g=new FileReader;g.onload=function(a){return function(b){var d=document.createElement("span");d.innerHTML=['\x3cimg class\x3d"thumb" src\x3d"',b.target.result,'" title\x3d"',escape(a.name),'"/\x3e'].join("");c.appendChild(d)}}(f);g.readAsDataURL(f)}}Vs.prototype.Cs=function(a){a=a.data[0];Ys[a._id]=a;Ws(this,1);this.Qk=!1;this.dispatchEvent({type:"changed_tag",tagName:"",value:a.url})};function Zs(a,b,c){this.Kd=b;this.ga=a;this.Ss=c}e=Zs.prototype;e.getUrl=function(){return this.Kd};e.qa=function(){return this.ga};e.ik=function(){return this.Ss};e.ld=function(a,b){Fj("/files/"+this.qa(),"DELETE",void 0,a,b)};e.equals=function(a){return!!a&&a.Kd===this.Kd};function $s(){this.id="fileParser"}$s.prototype.parse=function(a){var b=[],c=a.wa.match(new RegExp("http(s)?://("+at.join("|")+")"+(ug()+"/files/")+"\\w+","ig"));if(c)var d=a.od.El,b=La(c,function(a){var b=a.substr(a.lastIndexOf("/")+1),c=this.ik(b,d);return null!=c?new Zs(b,a,c):null},this);return Ka(b,function(a){return null!=a})};$s.prototype.ik=function(a,b){if(b&&s(b.attachedFiles))for(var c=0;c<b.attachedFiles.length;c++){var d=b.attachedFiles[c];if(d._id===a)return d}return Ys[a]||null};
var Ys={},at=["dev.hash5.com:8080",document.location.host];function bt(a,b){tq.call(this,a,b);this.hi="icon-attachment";this.Jb="Files";this.hn=[]}B(bt,tq);bt.prototype.sa=function(){this.g().a(this.fa,Rk,this.gc);ct(this)};bt.prototype.lk=function(){return new Vs};bt.prototype.gc=function(){ct(this)};function ct(a){var b=Gm(a.fa.ec(),$s);if(!gk(a.hn,b,function(a,b){return a.equals(b)})){a.hn=b;uq(a);for(var c=0;c<b.length;c++){var d=new ys(b[c]);a.Ie(d)}}};function dt(){L.call(this)}B(dt,si);dt.prototype.ha=function(){ll(bt)};dt.prototype.Vn=function(a){a=a.target;for(var b=a.pe,c=Gm(a.ec(),$s),d=0;d<c.length;d++)var f=c[d].getUrl(),b=b.replace(f,'\x3ca href\x3d"'+f+'" target\x3d"_blank" class\x3d"file-link"\x3e\x3c/a\x3e');a.pe=b};qi("files",dt);
//@ sourceURL=/asset/common/js-min/en/files.js